"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2687],{3291:(v,_,a)=>{a.d(_,{d:()=>M});var u=a(8023);const g={now:()=>(g.delegate||Date).now(),delegate:void 0};class h extends u.x{constructor(s=1/0,n=1/0,t=g){super(),this._bufferSize=s,this._windowTime=n,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,s),this._windowTime=Math.max(1,n)}next(s){const{isStopped:n,_buffer:t,_infiniteTimeWindow:l,_timestampProvider:r,_windowTime:o}=this;n||(t.push(s),!l&&t.push(r.now()+o)),this._trimBuffer(),super.next(s)}_subscribe(s){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(s),{_infiniteTimeWindow:t,_buffer:l}=this,r=l.slice();for(let o=0;o<r.length&&!s.closed;o+=t?1:2)s.next(r[o]);return this._checkFinalizedStatuses(s),n}_trimBuffer(){const{_bufferSize:s,_timestampProvider:n,_buffer:t,_infiniteTimeWindow:l}=this,r=(l?1:2)*s;if(s<1/0&&r<t.length&&t.splice(0,t.length-r),!l){const o=n.now();let d=0;for(let i=1;i<t.length&&t[i]<=o;i+=2)d=i;d&&t.splice(0,d+1)}}}var C=a(815);function M(m,s,n){let t,l=!1;return m&&"object"==typeof m?({bufferSize:t=1/0,windowTime:s=1/0,refCount:l=!1,scheduler:n}=m):t=m??1/0,(0,C.B)({connector:()=>new h(t,s,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}},2687:(v,_,a)=>{a.r(_),a.d(_,{CustomClassificationModelComponent:()=>r});var u=a(89),g=a(8207),h=a(3584),C=a(6284),M=a(4121),m=a(2147),s=a(3291),n=a(334),t=a(5095);function l(o,d){if(1&o&&t._UZ(0,"img",8),2&o){const i=d.$implicit;t.Akn(i.rotate),t.Q6J("src",i.img.src,t.LSH)}}let r=(()=>{class o{get images(){return this._images.getValue()}set images(i){this._images.getValue()!==i&&this._images.next(i)}constructor(){this._images=new M.X(null),this.images$=this._images.asObservable().pipe((0,m.x)(),(0,s.d)({bufferSize:1,refCount:!0}))}ngOnInit(){this._images.subscribe(i=>{i?.forEach(e=>{e.tensorImage=n.Xhn.fromPixels(e.img).resizeNearestNeighbor([224,224]).expandDims().div(255).toFloat()})})}imageLoad(i){const e=i,f=[];for(let c=0;c<e.length;c++){const P=e[c],p=document.createElement("img");p.width=224,p.height=224,p.src=URL.createObjectURL(P);let E=`transform:rotate(${2*c+90}deg)`;e.length-1===c&&(E="transform:rotate(0deg)"),f.push({fileName:P.name,img:p,index:c,rotate:E})}this._images.next(f)}trainModel(){const i=this.images?.map(e=>e?.tensorImage);if(void 0!==i){const e=n.Pel();e.add(n.ugM.dense({units:3,inputShape:[224,224,3]})),e.add(n.ugM.conv2d({filters:16,kernelSize:3,padding:"same",activation:"relu"})),e.add(n.ugM.maxPooling2d({})),e.add(n.ugM.conv2d({filters:32,kernelSize:3,padding:"same",activation:"relu"})),e.add(n.ugM.maxPooling2d({})),e.add(n.ugM.conv2d({filters:64,kernelSize:3,padding:"same",activation:"relu"})),e.add(n.ugM.maxPooling2d({})),e.add(n.ugM.dropout({rate:.2})),e.add(n.ugM.flatten({})),e.add(n.ugM.dense({units:128,activation:"softmax"})),e.add(n.ugM.dense({units:1})),e.compile({optimizer:"adam",loss:n.MB5.meanSquaredError,metrics:["accuracy"]}),e.summary(),e.fit(i,i,{epochs:5}).then(f=>{})}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-custom-classification-model"]],standalone:!0,features:[t.jDz],decls:12,vars:5,consts:[["id","container"],[2,"display","flex","flex-direction","column","align-items","center"],["img",""],[1,"img-container"],[3,"style","src",4,"ngFor","ngForOf"],[1,"buttons","alingment"],[3,"multiple","srcImageChange"],[3,"click"],[3,"src"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",null,2),t.TgZ(4,"div",3),t.YNc(5,l,1,3,"img",4),t.qZA()(),t.TgZ(6,"div",5)(7,"app-image-uploder",6),t.NdJ("srcImageChange",function(c){return e.imageLoad(c)}),t.qZA(),t.TgZ(8,"ion-button",7),t.NdJ("click",function(){return e.trainModel()}),t._uU(9," Train"),t.qZA()()(),t._uU(10),t.ALo(11,"json")),2&i&&(t.xp6(5),t.Q6J("ngForOf",e.images),t.xp6(2),t.Q6J("multiple",!0),t.xp6(3),t.hij(" ",t.lcZ(11,3,e.images),"\n"))},dependencies:[g.Pc,g.YG,u.ez,u.sg,u.Ts,h.D,C.u5],styles:[".img-container[_ngcontent-%COMP%]{display:contents}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;width:244px;position:absolute;height:244px}.alingment[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-content:stretch;justify-content:center;align-items:stretch}"]}),o})()}}]);