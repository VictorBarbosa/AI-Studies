"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2041],{2041:(U,d,i)=>{i.r(d),i.d(d,{StyleTransferComponent:()=>D});var f=i(89),m=i(8207),_=i(4401),c=i(6284),p=i(4121),u=i(2147),v=i(3291),h=i(8168),y=i(1947),e=i(5095);const P=["cont"],T=["style"],C=["canv"],E=["filePic"],M=["fileStyle"];function O(o,g){if(1&o&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&o){const t=g.$implicit;e.Q6J("value",t.img),e.xp6(1),e.hij(" ",t.label," ")}}let D=(()=>{class o{get selected(){return this._selected.getValue()}set selected(t){this._selected.getValue()!==t&&this._selected.next(t)}constructor(){this.images=[{img:"assets/Derkovits_Gyula_Talig\xe1s.jpeg",label:"Derkovits_Gyula_Taliga\u0301s"},{img:"assets/Landscape_with_black_figure.jpeg",label:"Landscape_with_black_figure"},{img:"assets/Large_bonfire.jpg",label:"Large_bonfire"},{img:"assets/Les_Demoiselles_d.jpeg",label:"Les_Demoiselles_d.jpeg"},{img:"assets/Nantes_from_the_Ile_Feydeau.jpeg",label:"Nantes_from_the_Ile_Feydeau"},{img:"assets/Pillars_of_creation.jpeg",label:"Pillars_of_creation.jpeg"},{img:"assets/Still_Life_with_a_Bottle_of_Rum.jpg",label:"Still_Life_with_a_Bottle_of_Rum"},{img:"assets/Still_life.jpeg",label:"Still_life"},{img:"assets/The_Scream.jpeg",label:"The_Scream"},{img:"assets/Van_Gogh.jpeg",label:"Van_Gogh"},{img:"assets/Vassily_Kandinsky.jpeg",label:"Vassily_Kandinsky"},{img:"assets/kanagawa_great_wave.jpeg",label:"kanagawa_great_wave"}],this.model=null,this.cont=null,this.style=null,this.canv=null,this.filePic=null,this.fileStyle=null,this._selected=new p.X("assets/Derkovits_Gyula_Talig\xe1s.jpeg"),this.selected$=this._selected.asObservable().pipe((0,u.x)(),(0,v.d)({bufferSize:1,refCount:!0})),_.YLj("assets/StyleTranfer/model.json").then(t=>{this.model=t,this.apply()})}ngOnInit(){this._selected.pipe((0,h.b)(t=>{var n;"fileUpload"===t&&(null===(n=this.fileStyle)||void 0===n||n.nativeElement.click())})).subscribe()}apply(){var t,n;if(this.model&&null!==(t=this.cont)&&void 0!==t&&t.nativeElement&&null!==(n=this.style)&&void 0!==n&&n.nativeElement){var l;const s=_.Xhn.fromPixels(this.cont.nativeElement,3).resizeNearestNeighbor([224,224]).expandDims().div(255).toFloat(),a=_.Xhn.fromPixels(this.style.nativeElement,3).resizeNearestNeighbor([224,224]).expandDims().div(255).toFloat(),r=this.model.execute([s,a]).dataSync(),S=_.wOQ(Array.from(r),[224,224,3]);_.Xhn.toPixels(S,null===(l=this.canv)||void 0===l?void 0:l.nativeElement)}}fileUploadPicture(t){const n=t.target.files[0],l=new FileReader;l.onloadend=s=>{var a;let r=new Image;r.src=s.target.result,null!==(a=this.cont)&&void 0!==a&&a.nativeElement&&(this.cont.nativeElement.src=r.src)},l.readAsDataURL(n)}clickFileUploadPicute(){var t;null===(t=this.filePic)||void 0===t||t.nativeElement.click()}fileUploadStyle(t){const n=t.target.files[0],l=new FileReader;l.onloadend=s=>{var a;let r=new Image;r.src=s.target.result,null!==(a=this.style)&&void 0!==a&&a.nativeElement&&(this.style.nativeElement.src=r.src)},l.readAsDataURL(n)}clickFileUploadStyle(){var t;null===(t=this.fileStyle)||void 0===t||t.nativeElement.click()}ngOnDestroy(){var t;null===(t=this.model)||void 0===t||t.dispose()}downloadPicture(){var t;null!==(t=this.canv)&&void 0!==t&&t.nativeElement&&(0,y.GN)(this.canv.nativeElement)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-style-transfer"]],viewQuery:function(t,n){if(1&t&&(e.Gf(P,5),e.Gf(T,5),e.Gf(C,5),e.Gf(E,5),e.Gf(M,5)),2&t){let l;e.iGM(l=e.CRH())&&(n.cont=l.first),e.iGM(l=e.CRH())&&(n.style=l.first),e.iGM(l=e.CRH())&&(n.canv=l.first),e.iGM(l=e.CRH())&&(n.filePic=l.first),e.iGM(l=e.CRH())&&(n.fileStyle=l.first)}},standalone:!0,features:[e.jDz],decls:26,vars:3,consts:[[1,"container"],[1,"image-container"],[1,"image"],["width","224","src","assets/cont.jpeg","alt",""],["cont",""],["hidden","","accept",".jpg,.jpeg","type","file",3,"change"],["filePic",""],[3,"click"],["width","224","alt","",3,"src"],["style",""],["fileStyle",""],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","fileUpload"],[1,"container-result"],["canv",""],[1,"buttons-alignment"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3,4),e.TgZ(5,"input",5,6),e.NdJ("change",function(s){return n.fileUploadPicture(s)}),e.qZA(),e.TgZ(7,"ion-button",7),e.NdJ("click",function(){return n.clickFileUploadPicute()}),e._uU(8,"Upload File "),e.qZA()(),e.TgZ(9,"div",2),e._UZ(10,"img",8,9),e.TgZ(12,"input",5,10),e.NdJ("change",function(s){return n.fileUploadStyle(s)}),e.qZA(),e.TgZ(14,"select",11),e.NdJ("ngModelChange",function(s){return n.selected=s}),e.YNc(15,O,2,2,"option",12),e.TgZ(16,"option",13),e._uU(17," Upload File "),e.qZA()()()(),e.TgZ(18,"div",14),e._UZ(19,"canvas",null,15),e.TgZ(21,"div",16)(22,"ion-button",7),e.NdJ("click",function(){return n.apply()}),e._uU(23,"Apply"),e.qZA(),e.TgZ(24,"ion-button",7),e.NdJ("click",function(){return n.downloadPicture()}),e._uU(25,"Download"),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("src",n.selected,e.LSH),e.xp6(4),e.Q6J("ngModel",n.selected),e.xp6(1),e.Q6J("ngForOf",n.images))},dependencies:[m.Pc,m.YG,f.ez,f.sg,c.u5,c.YN,c.Kr,c.EJ,c.JJ,c.On],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px!important;height:255px;border:1px solid black}.container[_ngcontent-%COMP%]   .container-result[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;flex-direction:column}.buttons-alignment[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}"]}),o})()}}]);