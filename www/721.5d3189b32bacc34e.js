"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[721],{721:(E,_,o)=>{o.r(_),o.d(_,{ObjectDetectedComponent:()=>b});var f=o(8239),d=o(89),m=o(8207),c=o(4401),p=o(4121),u=o(2147),g=o(3291),e=o(5095);const h=["img"],O=["file"];function D(l,r){if(1&l&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&l){const t=r.$implicit;e.xp6(2),e.hij(" ",t.name,""),e.xp6(2),e.hij(" ",t.probability,"")}}let b=(()=>{class l{get srcImage(){return this._srcImage.getValue()}set srcImage(t){this._srcImage.getValue()!==t&&this._srcImage.next(t)}get position(){return this._position.getValue()}set position(t){this._position.getValue()!==t&&this._position.next(t)}constructor(){var t=this;this.model=null,this.img=null,this.file=null,this._srcImage=new p.X(""),this.srcImage$=this._srcImage.asObservable().pipe((0,u.x)(),(0,g.d)({bufferSize:1,refCount:!0})),this._position=new p.X(null),this.position$=this._position.asObservable().pipe((0,u.x)(),(0,g.d)({bufferSize:1,refCount:!0})),c.YLj("https://storage.googleapis.com/tfjs-models/savedmodel/model.json",{fromTFHub:!0}).then(function(){var n=(0,f.Z)(function*(s){t.model=s});return function(s){return n.apply(this,arguments)}}())}ngOnInit(){this._srcImage.subscribe(t=>{t&&this.predict(t)})}pictureUpload(t){const i=t.target.files[0],n=new FileReader;n.onloadend=s=>{(new Image).src=s.target.result,this._srcImage.next(s.target.result)},n.readAsDataURL(i)}predict(t){const i=this.model,n=new Image(224,224);n.onload=()=>{if(i){const s=c.lub(()=>c.Xhn.fromPixels(n,3).toFloat().expandDims());i.predict(s).dataSync()}},n.src=t}clickFileUpload(){var t;null===(t=this.file)||void 0===t||t.nativeElement.click()}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-object-detected"]],viewQuery:function(t,i){if(1&t&&(e.Gf(h,7),e.Gf(O,7)),2&t){let n;e.iGM(n=e.CRH())&&(i.img=n.first),e.iGM(n=e.CRH())&&(i.file=n.first)}},standalone:!0,features:[e._Bn([]),e.jDz],decls:12,vars:1,consts:[["id","container"],[2,"display","flex","flex-direction","column","align-items","center"],["img",""],[4,"ngFor","ngForOf"],["hidden","","accept",".jpg,.jpeg","type","file",3,"change"],["file",""],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",null,2),e.TgZ(4,"div")(5,"table"),e.YNc(6,D,5,2,"tr",3),e.qZA()()(),e.TgZ(7,"div")(8,"input",4,5),e.NdJ("change",function(s){return i.pictureUpload(s)}),e.qZA(),e.TgZ(10,"ion-button",6),e.NdJ("click",function(){return i.clickFileUpload()}),e._uU(11,"Upload File "),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngForOf",i.position))},dependencies:[m.Pc,m.YG,d.ez,d.sg]}),l})()}}]);