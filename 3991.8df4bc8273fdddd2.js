"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3991],{3991:(C,_,o)=>{o.r(_),o.d(_,{ObjectDetectedComponent:()=>D});var f=o(8239),d=o(89),m=o(8207),r=o(4401),u=o(4121),g=o(2147),p=o(3291),t=o(5095);const h=["img"],O=["file"];function b(c,l){if(1&c&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&c){const e=l.$implicit;t.xp6(2),t.hij(" ",e.name,""),t.xp6(2),t.hij(" ",e.probability,"")}}let D=(()=>{class c{get srcImage(){return this._srcImage.getValue()}set srcImage(e){this._srcImage.getValue()!==e&&this._srcImage.next(e)}get position(){return this._position.getValue()}set position(e){this._position.getValue()!==e&&this._position.next(e)}constructor(){var e=this;this.model=null,this.img=null,this.file=null,this._srcImage=new u.X(""),this.srcImage$=this._srcImage.asObservable().pipe((0,g.x)(),(0,p.d)({bufferSize:1,refCount:!0})),this._position=new u.X(null),this.position$=this._position.asObservable().pipe((0,g.x)(),(0,p.d)({bufferSize:1,refCount:!0})),r.YLj("https://storage.googleapis.com/tfjs-models/savedmodel/model.json",{fromTFHub:!0}).then(function(){var n=(0,f.Z)(function*(s){e.model=s});return function(s){return n.apply(this,arguments)}}())}ngOnInit(){this._srcImage.subscribe(e=>{e&&this.predict(e)})}pictureUpload(e){const i=e.target.files[0],n=new FileReader;n.onloadend=s=>{(new Image).src=s.target.result,this._srcImage.next(s.target.result)},n.readAsDataURL(i)}predict(e){const i=this.model,n=new Image(224,224);n.onload=()=>{if(i){const s=r.lub(()=>r.Xhn.fromPixels(n,3).toFloat().expandDims());i.predict(s).dataSync()}},n.src=e}clickFileUpload(){this.file?.nativeElement.click()}}return c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-object-detected"]],viewQuery:function(e,i){if(1&e&&(t.Gf(h,7),t.Gf(O,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.img=n.first),t.iGM(n=t.CRH())&&(i.file=n.first)}},standalone:!0,features:[t._Bn([]),t.jDz],decls:12,vars:1,consts:[["id","container"],[2,"display","flex","flex-direction","column","align-items","center"],["img",""],[4,"ngFor","ngForOf"],[1,"buttons"],["hidden","","accept",".jpg,.jpeg","type","file",3,"change"],["file",""],[3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",null,2),t.TgZ(4,"div")(5,"table"),t.YNc(6,b,5,2,"tr",3),t.qZA()()(),t.TgZ(7,"div",4)(8,"input",5,6),t.NdJ("change",function(s){return i.pictureUpload(s)}),t.qZA(),t.TgZ(10,"ion-button",7),t.NdJ("click",function(){return i.clickFileUpload()}),t._uU(11,"Upload File "),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("ngForOf",i.position))},dependencies:[m.Pc,m.YG,d.ez,d.sg],styles:["@media screen and (max-width: 660px){img[_ngcontent-%COMP%]{max-width:60%}ion-button[_ngcontent-%COMP%]{width:100%}}.buttons[_ngcontent-%COMP%]{bottom:0;position:absolute;width:100%;display:flex;align-items:center;flex-direction:column}"]}),c})()}}]);